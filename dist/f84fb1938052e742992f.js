(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{14:function(t,e,n){t.exports=n.p+"ea102967bd273afd4f3eb4383386ac7f.jpg"},25:function(t){t.exports=[{id:1,photo:"user1.jpg",name:"Ковальчук Дмитрий",pos:"Основатель Loftschool",text:"Этот парень проходил обучение веб-разработке не где-то, а в LoftSchool! 4,5 месяца только самых тяжелых испытаний и бессонных ночей!"},{id:2,photo:"user2.jpg",name:"Владимир Сабанцев",pos:"Преподаватель",text:"Этот код выдержит любые испытания. Только пожалуйста, не загружайте сайт на слишком старых браузерах"},{id:3,photo:"user1.jpg",name:"Ковальчук Дмитрий",pos:"Основатель Loftschool",text:"Этот парень проходил обучение веб-разработке не где-то, а в LoftSchool! 4,5 месяца только самых тяжелых испытаний и бессонных ночей!"},{id:4,photo:"user2.jpg",name:"Владимир Сабанцев",pos:"Преподаватель",text:"Этот код выдержит любые испытания. Только пожалуйста, не загружайте сайт на слишком старых браузерах"}]},48:function(t,e,n){},65:function(t,e,n){"use strict";var o=n(48);n.n(o).a},93:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"comments"},[o("div",{staticClass:"container"},[t._m(0),o("div",{staticClass:"comments__block"},[o("h3",{staticClass:"comments__title"},[t._v("Новый отзыв")]),o("form",{staticClass:"edit-comment",on:{submit:function(e){return e.preventDefault(),t.saveComment(e)}}},[o("div",{staticClass:"download-file"},[o("input",{staticClass:"download-file__input",attrs:{type:"file",accept:"image/jpeg,image/png,image/jpg",id:"photo"},on:{change:t.handleFile}}),o("label",{staticClass:"download-file__label",attrs:{for:"photo"}},[o("div",{staticClass:"download-file__img"},[t.filePreview?o("img",{attrs:{src:t.filePreview,alt:"avatar"}}):o("img",{attrs:{src:n(14),alt:"avatar"}})]),o("span",{staticClass:"download-file__text"},[t._v("Изменить фото")])])]),o("div",{staticClass:"edit-comment__form"},[o("div",{staticClass:"edit-comment__row"},[o("div",{staticClass:"edit-comment__field"},[o("Input",{attrs:{value:t.editComment.name,error:t.validation.firstError("editComment.name"),label:"Имя автора"},model:{value:t.editComment.name,callback:function(e){t.$set(t.editComment,"name",e)},expression:"editComment.name"}})],1),o("div",{staticClass:"edit-comment__field"},[o("Input",{attrs:{value:t.editComment.pos,error:t.validation.firstError("editComment.pos"),label:"Титул автора"},model:{value:t.editComment.pos,callback:function(e){t.$set(t.editComment,"pos",e)},expression:"editComment.pos"}})],1)]),o("div",{staticClass:"edit-comment__field"},[o("Input",{attrs:{value:t.editComment.text,error:t.validation.firstError("editComment.text"),label:"Отзыв",type:"textarea"},model:{value:t.editComment.text,callback:function(e){t.$set(t.editComment,"text",e)},expression:"editComment.text"}})],1),o("div",{staticClass:"edit-comment__btns"},[o("button",{staticClass:"btn-zero",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v("Отмена")]),o("button",{staticClass:"btn-default"},[t._v("Сохранить")])])])])]),o("div",{staticClass:"comments__show"},[o("div",{staticClass:"comments__card"},[o("NewCard",{attrs:{info:"Добавить отзыв"},on:{addNewBlock:t.addNewBlock}})],1),t._l(t.comments,function(e){return o("div",{key:e.id,staticClass:"comments__card"},[o("div",{staticClass:"review-card"},[o("div",{staticClass:"review-card__user"},[o("User",{attrs:{isReview:"",name:e.name,position:e.pos,photo:e.photo}})],1),o("div",{staticClass:"review-card__text"},[o("p",[t._v(t._s(e.text))])]),o("div",{staticClass:"review-card__btns"},[o("button",{staticClass:"btn-card btn-card--edit",attrs:{type:"button"},on:{click:t.editThisComment}},[t._v("Править")]),o("button",{staticClass:"btn-card btn-card--delete",attrs:{type:"button"},on:{click:t.deleteComment}},[t._v("Удалить")])])])])})],2)])])};o._withStripped=!0;var i=n(10),a={data:function(){return{comments:[],editComment:{name:"",pos:"",text:"",photo:""},filePreview:""}},created:function(){this.comments=n(25)},methods:{handleFile:function(t){var e=this,n=this.fileFromForm(t);this.editComment.photo=n,this.renderFile(n).then(function(t){e.filePreview=t})},fileFromForm:function(t){var e=t.target.files||t.dataTransfer.files;if(!e.length)throw new Error("Нет файла");return e[0]},renderFile:function(t){var e=new FileReader;return new Promise(function(n){try{e.readAsDataURL(t),e.onloadend=function(){n(e.result)}}catch(t){throw new Error("Ошибка при чтении файла")}})},cancelEdit:function(){this.validation.reset(),this.filePreview="",console.log("cancel edit comment")},saveComment:function(){this.$validate().then(function(t){t&&console.log("save comment",t)})},addNewBlock:function(){console.log("add new comment")},editThisComment:function(){console.log("edit comment")},deleteComment:function(){confirm("Удалить отзыв?")&&console.log("delete comment")}},validators:{"editComment.name":function(t){return i.Validator.value(t).required("Заполните поле")},"editComment.pos":function(t){return i.Validator.value(t).required("Заполните поле")},"editComment.text":function(t){return i.Validator.value(t).required("Заполните поле")}},components:{Input:function(){return n.e(0).then(n.bind(null,97))},NewCard:function(){return n.e(1).then(n.bind(null,96))},User:function(){return n.e(7).then(n.bind(null,87))}}},s=(n(65),n(8)),r=Object(s.a)(a,o,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"comments__header"},[e("h2",{staticClass:"section-title"},[this._v("Блок «Отзывы»")])])}],!1,null,"142d588f",null);r.options.__file="src/admin/components/pages/Comments.vue";e.default=r.exports}}]);